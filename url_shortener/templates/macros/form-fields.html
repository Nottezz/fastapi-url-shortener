{% macro form_field(field_name, field_schema, is_required, validated=False, error=None, value=None) %}
  {# Определяем тип input #}
  {% set input_type = "text" %}

  {% if field_name == "target_url" %}
      {% set input_type = "url" %}
  {% elif field_name == "slug" %}
      {% set input_type = "text" %}
  {% endif %}

  {# Иконки #}
  {% set icon_class = "" %}
  {% if field_name == "target_url" %}
      {% set icon_class = "bi bi-link-45deg" %}
  {% elif field_name == "slug" %}
      {% set icon_class = "bi bi-tag" %}
  {% elif field_name == "summary" %}
      {% set icon_class = "bi bi-card-text" %}
  {% endif %}

  {# Summary — textarea #}
  {% if field_name == "summary" %}
    <div class="form-floating mb-3">
      <textarea
        class="form-control {% if validated %}{% if error %}is-invalid{% else %}is-valid{% endif %}{% endif %}"
        id="{{ field_name }}"
        name="{{ field_name }}"
        style="height: 140px;"
        {% if is_required %}required{% endif %}
        {% if field_schema.get('minLength') %}minlength="{{ field_schema.minLength }}"{% endif %}
        {% if field_schema.get('maxLength') %}maxlength="{{ field_schema.maxLength }}"{% endif %}
        placeholder="{{ field_schema.title }}">{{ value or '' }}</textarea>

      <label for="{{ field_name }}">
        <i class="{{ icon_class }} me-1"></i>{{ field_schema.title }}
      </label>

      {% if validated and error %}
          <div class="invalid-feedback">{{ error }}</div>
      {% endif %}
    </div>

  {% else %}

    {# input для slug и target_url #}
    <div class="form-floating mb-3 {% if validated %}has-validation{% endif %}">
      <input
        type="{{ input_type }}"
        class="form-control {% if validated %}{% if error %}is-invalid{% else %}is-valid{% endif %}{% endif %}"
        id="{{ field_name }}"
        name="{{ field_name }}"
        {% if value != None %}value="{{ value }}"{% endif %}
        {% if is_required %}required{% endif %}
        {% if field_schema.get('minLength') %}minlength="{{ field_schema.minLength }}"{% endif %}
        {% if field_schema.get('maxLength') %}maxlength="{{ field_schema.maxLength }}"{% endif %}
        placeholder="{{ field_schema.title }}">

      <label for="{{ field_name }}">
        <i class="{{ icon_class }} me-1"></i>{{ field_schema.title }}
      </label>

      {% if validated and error %}
          <div class="invalid-feedback">{{ error }}</div>
      {% endif %}
    </div>

  {% endif %}
{% endmacro %}
